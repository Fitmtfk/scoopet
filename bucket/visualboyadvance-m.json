{
    "version": "2.2.2",
    "description": "Community-maintained, improved version of the VisualBoyAdvance Game Boy emulator",
    "homepage": "https://vba-m.com",
    "license": {
        "identifier": "GPL-2.0",
        "url": "http://www.gnu.org/licenses/gpl-2.0.html"
    },
    "url": "https://github.com/visualboyadvance-m/visualboyadvance-m/releases/download/v2.2.2/visualboyadvance-m-Win-x86_64.zip",
    "hash": "a9a1fb05617d42bee75fe92c1820c05f98a28eb62acbfd2b10e6e3366f2733fb",
    "pre_install": [
        "if (!(Test-Path \"$persist_dir\\vbam.ini\")) {",
        "   New-Item \"$dir\\vbam.ini\" -Type File | Out-Null",
        "   Set-Content \"$dir\\vbam.ini\" '[General]'",
        "   Add-Content \"$dir\\vbam.ini\" 'OnlineUpdates=never'",
        "   'Battery', 'Recording', 'Screenshot', 'State' | ForEach-Object {",
        "   Add-Content -Path \"$dir\\vbam.ini\" -Value $_`Dir`=$_ }",
        "}",
        "if (!(Test-Path \"$persist_dir\\vba-over.ini\")) {",
        "   New-Item \"$dir\\vba-over.ini\" -Type File | Out-Null",
        "}"
    ],
    "post_install": [
        "Write-Host `n\"Start instal language pack.\"",
        "$dlFile = 'dl.zip'",
        "Invoke-CachedDownload $app ${version}\"_language_pack\" \"https://github.com/visualboyadvance-m/visualboyadvance-m/releases/download/v$version/translations.zip\" \"$dir\\$dlFile\"",
        "Expand-7zipArchive \"$dir\\$dlfile\" \"$dir\" -Removal",
        "Write-Host \"Language pack installed.\""
    ],
    "bin": "visualboyadvance-m.exe",
    "shortcuts": [
        [
            "visualboyadvance-m.exe",
            "VisualBoyAdvance-M"
        ]
    ],
    "persist": [
        "vbam.ini",
        "vba-over.ini",
        "Battery",
        "Recording",
        "Screenshot",
        "State"
    ],
    "checkver": {
        "github": "https://github.com/visualboyadvance-m/visualboyadvance-m"
    },
    "autoupdate": {
        "url": "https://github.com/visualboyadvance-m/visualboyadvance-m/releases/download/v$version/visualboyadvance-m-Win-x86_64.zip"
    }
}
